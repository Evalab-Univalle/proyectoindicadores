# language: es
# encoding: utf-8
# Archivo: CapturarErrores.feature
# Autor: Ángel García Baños
# Email:  angarciaba@gmail.com
# Fecha creación: 2014-07-20
# Fecha última modificación: 2014-08-16
# Versión: 0.2
# Licencia: GPL

Característica: Posibles errores que se deben detectar en el archivo de Programación de Asignaturas (hoja de cálculo rellenada manualmente por los profesores y bajada de Google Drive)

  Antecedentes: Crear hoja de cálculo de Google Drive con la cabecera y tres asignaturas típicas, y borrar el archivo de logs
    Dado que se crea un archivo de logs vacío '_Errores'
    Y se construye un archivo '_Necesidades_ - Hoja 1.tsv'
    Y en la fila 1 he escrito 'ASIGNATURA	HORARIO SOLICITADO	CUPOS solicitados por cada programa	GRUPO o FRANJA	CUPOS solicitados en cada GRUPO o FRANJA	Cupos matriculados	Num. PROFESORES REQUERIDOS	Grupo procedente de franja	331-Sala 5	Cupos	Grupo procedente de franja	331-Sala 2	Cupos	Grupo procedente de franja	331-Sala 3	Cupos	Grupo procedente de franja	331-Sala 1	Cupos	Grupo procedente de franja	331-2026	Cupos	Grupo procedente de franja	331-2027	Cupos	Grupo procedente de franja	331-2075	Cupos	Grupo procedente de franja	No necesita aula	Cupos	Grupo procedente de franja	Aulas externas	Cupos'
    Y en la fila 2 he escrito '									56			50			25			20			55			55			36			60			150'
    Y en la fila 3 he escrito '750001M -> ALGORITMIA Y PROGRAMACIÓN, Cred. 3'
    Y en la fila 4 he escrito '2710-00-NOC -> TECNOLOGÍA ELECTRÓNICA	LUN -> 18:30-21:30	47	F04a	67		3				1	Paul McCartney	24	2	Alan Turing	23	3	George Harrison	20'
    Y en la fila 5 he escrito '3469-00-DIU -> LICENCIATURA EN EDUCACIÓN BÁSICA CON ÉNFASIS EN MATEMÁTICAS	VIE -> 10:00-13:00	3	F05a	13		1	4	Richard Dawkins	13'
    Y en la fila 6 he escrito '3556-00-DIU -> LICENCIATURA EN ARTES VISUALES	LUN -> 14:00-17:00	2	F03a	132		4	5	John Lennon	44	6	Paul McCartney	43	7	George Harrison	25	8	Ringo Starr	20'
    Y en la fila 7 he escrito '3740-00-DIU -> INGENIERIA TOPOGRAFICA	LUN -> 7:00-10:00	80	F01a	150		4	9	Richard Dawkins	55	10	John von Neumann	50	11	Richard Feynmann	25	12	George Harrison	20'
    Y en la fila 8 he escrito '3741-00-DIU -> INGENIERIA DE MATERIALES	LUN -> 14:00-17:00	50	F03a'
    Y en la fila 9 he escrito '3744-00-DIU -> INGENIERIA ELECTRONICA	LUN -> 10:00-13:00	30	F02a	150		4	13	Niels Bohr	55	14	John Lennon	50	15	Paul Dirac	25	16	Douglas Hofstadter	20'
    Y en la fila 10 he escrito '3745-00-DIU -> INGENIERIA AGRICOLA	LUN -> 10:00-13:00	45	F02a'
    Y en la fila 11 he escrito '3746-00-DIU -> INGENIERIA ELECTRICA	LUN -> 10:00-13:00	20	F02a'
    Y en la fila 12 he escrito '3747-00-DIU -> INGENIERIA CIVIL	LUN -> 7:00-10:00	50	F01a'
    Y en la fila 13 he escrito '3748-00-DIU -> INGENIERIA MECANICA	LUN -> 14:00-17:00	55	F03a'
    Y en la fila 14 he escrito '3749-00-DIU -> INGENIERIA QUIMICA	LUN -> 10:00-13:00	55	F02a'
    Y en la fila 15 he escrito '3751-00-DIU -> INGENIERIA INDUSTRIAL	LUN -> 14:00-17:00	25	F03a'
    Y en la fila 16 he escrito '3751-00-DIU -> INGENIERIA INDUSTRIAL	LUN -> 18:30-21:30	20	F04a'
    Y en la fila 17 he escrito '3752-00-DIU -> ESTADISTICA	MIE -> 7:00-10:00	90	F07a	90		2	17	John Lennon	45	18	George Harrison	45'
    Y en la fila 18 he escrito '3753-00-DIU -> INGENIERIA DE ALIMENTOS	LUN -> 7:00-10:00	20	F01a'
    Y en la fila 19 he escrito '3753-00-DIU -> INGENIERIA DE ALIMENTOS	SAB -> 8:00-11:00	16	F06a	16		1							19	Leonard Susskind	16'
    Y en la fila 20 he escrito '3754-00-DIU -> INGENIERIA SANITARIA Y AMBIENTAL	VIE -> 10:00-13:00	10	F05a'
    Y en la fila 21 he escrito ''
    Y en la fila 22 he escrito '750030M -> BASES DE DATOS I, Cred. 4'
    Y en la fila 23 he escrito '2711-00-NOC -> TECNOLOGÍA EN SISTEMAS DE INFORMACIÓN	MAR -> 18:00-21:00, SAB -> 14:00-15:00	20	80	20		1																80	Carlos Santana	20'
    Y en la fila 24 he escrito '3743-00-DIU -> INGENIERIA DE SISTEMAS	MAR -> 10:00-13:00 VIE -> 9:00-10:00	50	1	50		1					Ringo Starr (VIE -> 9:00-10:00,25%)	50											Ringo Starr (MAR -> 10:00-13:00,75%)	50'
    Y en la fila 25 he escrito ''
    Y en la fila 26 he escrito '750067M -> PROGRAMACIÓN CON RESTRICCIONES (E), Cred. 3'
    Y en la fila 27 he escrito '3743-00-DIU -> INGENIERIA DE SISTEMAS	JUE -> 15:00-18:00	30	1	30		1																				Leonid Afremov (50%), Van Gogh (50%)	30'
    Y en la fila 28 he escrito ''
    Y en la fila 29 he escrito '750082M -> INTRODUCCIÓN A LA TECNOLOGÍA INFORMÁTICA, Cred. 2'
    Y en la fila 30 he escrito '2710-00-NOC -> TECNOLOGÍA ELECTRÓNICA	JUE -> 18:00-20:00	90	F06b	90		3	1	Niels Bohr	40	2	George Harrison	30	3	Paul McCartney	20'
    Y en la fila 31 he escrito ''


@exito
  Escenario: Todo está bien especificado y no hay errores
    Cuando se ejecuta la verificación de errores
    Entonces el archivo de logs no debe tener errores
    
  Escenario: Cabecera con campos equivocados
    Dado que en la fila 1 columna B he escrito 'cupos'
    Cuando se ejecuta la verificación de errores
    Entonces el archivo de logs debe incluir 'en línea 1: La columna B debería decir HORARIO SOLICITADO pero dice cupos'

  Escenario: Cabecera con espacios sin cupos
    Dado que en la fila 2 columna J he escrito ''
    Cuando se ejecuta la verificación de errores
    Entonces el archivo de logs debe incluir 'en línea 2: Espacio '331-Sala 5' sin cupos'

  Escenario: Profesor repetido en misma FRANJA
    Dado que en la fila 7 columna R he escrito 'John von Neumann'
    Cuando se ejecuta la verificación de errores
    Entonces el archivo de logs debe incluir 'en línea 7: No puede estar el mismo profesor (John von Neumann) varias veces en la misma FRANJA'
  
  Escenario: Falta el nombre del programa académico
    Dado que en la fila 15 columna A he escrito ''
    Cuando se ejecuta la verificación de errores
    Entonces el archivo de logs debe incluir 'en línea 15: Falta el nombre del programa académico'

  Escenario: FRANJA con horario equivocado
    Dado que en la fila 6 columna C he escrito ''
    Cuando se ejecuta la verificación de errores
    Entonces el archivo de logs debe incluir 'en línea 6: Faltan los cupos solicitados por el programa académico'

  Escenario: FRANJA con horario equivocado
    Dado que en la fila 8 columna B he escrito 'LUN -> 14:30-17:30'
    Cuando se ejecuta la verificación de errores
    Entonces el archivo de logs debe incluir 'en línea 8: No coincide el horario de la FRANJA con su primera declaración'
    
  Escenario: El cupo total de una FRANJA debe estar sólo en la primera vez que aparezca una FRANJA
    Dado que en la fila 11 columna E he escrito '5'
    Cuando se ejecuta la verificación de errores
    Entonces el archivo de logs debe incluir 'en línea 11: El cupo total de una FRANJA debe de indicarse sólo en la primera línea donde aparezca esa FRANJA, y no en las posteriores'

  Escenario: El número total de profesores de una FRANJA debe estar sólo en la primera vez que aparezca una FRANJA
    Dado que en la fila 11 columna G he escrito '2'
    Cuando se ejecuta la verificación de errores
    Entonces el archivo de logs debe incluir 'en línea 11: El número de profesores de una FRANJA debe de indicarse sólo en la primera línea donde aparezca esa FRANJA, y no en las posteriores'
  
  Escenario: El número total de profesores de una FRANJA debe estar sólo en la primera vez que aparezca una FRANJA
    Dado que en la fila 11 columna I he escrito 'Richard Dawkins'
    Cuando se ejecuta la verificación de errores
    Entonces el archivo de logs debe incluir 'en línea 11: Todos los profesores de un GRUPO o FRANJA deben ponerse sólo en la primera línea donde aparezca esa FRANJA, y no en las posteriores'
  
  Escenario: FRANJA o GRUPO sin horario
    Dado que en la fila 17 columna B he escrito ''
    Cuando se ejecuta la verificación de errores
    Entonces el archivo de logs debe incluir 'en línea 17: Falta el horario de 'ALGORITMIA Y PROGRAMACIÓN''
    
  Escenario: FRANJA o GRUPO sin cupo total
    Dado que en la fila 6 columna E he escrito ''
    Cuando se ejecuta la verificación de errores
    Entonces el archivo de logs debe incluir 'en línea 6: Falta el cupo total'
  
  Escenario: FRANJA o GRUPO sin número total de profesores
    Dado que en la fila 9 columna G he escrito ''
    Cuando se ejecuta la verificación de errores
    Entonces el archivo de logs debe incluir 'en línea 9: Falta el número total de profesores de la FRANJA o GRUPO'

  Escenario: FRANJA o GRUPO sin profesores
    Dado que en la fila 5 columna I he escrito ''
    Cuando se ejecuta la verificación de errores
    Entonces el archivo de logs debe incluir 'en línea 5: Faltan profesores'

  Escenario: Dos profesores para el mismo GRUPO de la misma asignatura pero sin incluir porcentajes
    Dado que en la fila 27 columna AA he escrito 'Leonid Afremov, Van Gogh'
    Cuando se ejecuta la verificación de errores
    Entonces el archivo de logs debe incluir 'en línea 27: Profesores sin porcentajes'
  
  Escenario: Tres profesores para el mismo GRUPO de la misma asignatura en salones y horarios distintos pero que no suman 100 en los porcentajes
    Dado que en la fila 27 columna AA he escrito 'Leonid Afremov (JUE -> 15:00-16:00, 40%), Van Gogh (JUE -> 16:00-17:00, 10%)'
    Y en la fila 27 columna AD he escrito 'Sheldon Cooper (JUE -> 17:00-18:00, 8%)'
    Cuando se ejecuta la verificación de errores
    Entonces el archivo de logs debe incluir 'en línea 27: Los porcentajes de los profesores no suman 100'
  
  Escenario: Tres profesores para el mismo GRUPO de la misma asignatura en salones y horarios distintos pero que no cubren todo el horario de la asignatura
    Dado que en la fila 27 columna AA he escrito 'Leonid Afremov (JUE -> 15:00-15:30, 40%), Van Gogh (JUE -> 16:00-17:00, 10%)'
    Y en la fila 27 columna AD he escrito 'Sheldon Cooper (JUE -> 17:00-18:00, 50%)'
    Cuando se ejecuta la verificación de errores
    Entonces el archivo de logs debe incluir 'en línea 27: Los profesores no cubren completamente el horario de la asignatura'
    
  Escenario: Una asignatura con menos cupos que los solicitados
    Dado que en la fila 27 columna AB he escrito '29'
    Cuando se ejecuta la verificación de errores
    Entonces el archivo de logs debe incluir 'en línea 27: No se están ofertando todos los cupos solicitados en este GRUPO (30)'

  Escenario: Dos profesores para el mismo GRUPO de la misma asignatura en salones distintos pero no ofrecen todos los cupos requeridos
    Dado que en la fila 27 columna AA he escrito 'Leonid Afremov'
    Y en la fila 27 columna AB he escrito '30'
    Y en la fila 27 columna AD he escrito 'Van Gogh'
    Y en la fila 27 columna AE he escrito '29'
    Cuando se ejecuta la verificación de errores
    Entonces el archivo de logs debe incluir 'en línea 27: No se están ofertando todos los cupos solicitados en este GRUPO (30)'

  Escenario: En una asignatura no coincide el número de créditos con el número de horas
    Dado que en la fila 22 columna A he escrito '750030M -> BASES DE DATOS I, Cred. 3'
    Cuando se ejecuta la verificación de errores
    Entonces el archivo de logs debe incluir 'en línea 24: No coincide el número de créditos (3) con el número de horas (4.0) de 750030M'
    Y el archivo de logs debe incluir 'en línea 23: No coincide el número de créditos (3) con el número de horas (4.0) de 750030M'

  Escenario: El Num. PROFESORES REQUERIDOS no coincide con los que se programan
    Dado que en la fila 6 columna I he escrito '' 
    Y que en la fila 6 columna J he escrito ''
    Cuando se ejecuta la verificación de errores
    Entonces el archivo de logs debe incluir 'en línea 6: El Num. PROFESORES REQUERIDOS (4) no coincide con los que se programan (3)'

  Escenario: Mal sumados los cupos de una FRANJA
    Dado que en la fila 16 columna C he escrito '21' 
    Cuando se ejecuta la verificación de errores
    Entonces el archivo de logs debe incluir 'Mal sumados los cupos de la FRANJA F04a de la asignatura 750001M. Debería dar 68 pero aparece 67'

  Escenario: Los cupos ofrecidos a una franja son menos que los solicitados
    Dado que en la fila 4 columna C he escrito '48' 
    Y que en la fila 4 columna E he escrito '68'
    Cuando se ejecuta la verificación de errores
    Entonces el archivo de logs debe incluir 'En la FRANJA F04a de la asignatura 750001M se están ofertando sólo 67 cupos, pero los solicitados son 68'

  Escenario: Los cupos matriculados son más que los ofrecidos
    Dado que en la fila 4 columna F he escrito '68' 
    Cuando se ejecuta la verificación de errores
    Entonces el archivo de logs debe incluir 'En la FRANJA F04a de la asignatura 750001M se están ofertando sólo 67 cupos, pero han logrado matricularse 68'

  Escenario: Un espacio donde se asignan más cupos que su capacidad
    Dado que en la fila 27 columna AB he escrito '44'
    Cuando se ejecuta la verificación de errores
    Entonces el archivo de logs debe incluir 'en línea 27: La capacidad del espacio 331-2075 es 36, pero se quiere programar para 44 cupos'

  Escenario: profesor simultáneamente en dos GRUPOs
    Dado que en la fila 24 columna K he escrito '03'
    Y que en la fila 24 columna W he escrito '04'
    Cuando se ejecuta la verificación de errores
    Entonces el archivo de logs debe incluir 'en línea 24: El mismo profesor no puede estar simultáneamente en dos GRUPOs 03 y 04'

  Escenario: GRUPO no coincide
    Dado que en la fila 23 columna W he escrito '04'
    Cuando se ejecuta la verificación de errores
    Entonces el archivo de logs debe incluir 'En el curso 'BASES DE DATOS I' no coincide el GRUPO 04 con el 80'
  
  Escenario: GRUPO repetido al convertirlos de FRANJAS
    Dado que en la fila 6 columna N he escrito '02'
    Cuando se ejecuta la verificación de errores
    Entonces el archivo de logs debe incluir 'En el curso 'ALGORITMIA Y PROGRAMACIÓN' en la FRANJA F03a el GRUPO 02 ya existe'

  Escenario: FRANJA parcialmente convertida a GRUPOs
    Dado que en la fila 30 columna K he escrito ''
    Y que en la fila 4 columna F he escrito '1'
    Cuando se ejecuta la verificación de errores
    Entonces el archivo de logs debe incluir 'En el curso 'INTRODUCCIÓN A LA TECNOLOGÍA INFORMÁTICA', la FRANJA F06b no está completamente convertida a GRUPOs (a pesar de que ya hay estudiantes matriculados)'

  Escenario: Un profesor en dos asignaturas en horarios que se solapan
    Dado que en la fila 27 columna B he escrito 'LUN -> 14:00-19:00'
    Y en la fila 4 columna L he escrito 'Leonid Afremov'
    Cuando se ejecuta la verificación de errores
    Entonces el archivo de logs debe incluir 'Se le solapan horarios al profesor Leonid'
    
  Escenario: Un profesor en dos GRUPOS de la misma asignatura en horarios que se solapan
    Dado que en la fila 23 columna X he escrito 'Ringo Starr'
    Y en la fila 23 columna B he escrito 'MAR -> 12:00-14:00, SAB -> 14:00-16:00'
    Cuando se ejecuta la verificación de errores
    Entonces el archivo de logs debe incluir 'Se le solapan horarios al profesor Ringo'

  Escenario: Dos asignaturas en el mismo espacio y con horarios que se solapan
    Dado que en la fila 27 columna AA he escrito ''
    Y que en la fila 27 columna AB he escrito ''
    Y en la fila 27 columna L he escrito 'Sheldon Cooper'
    Y en la fila 27 columna M he escrito '30'
    Y en la fila 27 columna B he escrito 'LUN -> 18:30-21:30'
    Cuando se ejecuta la verificación de errores
    Entonces el archivo de logs debe incluir 'En el espacio '331-Sala 2' se solapan horarios de dos asignaturas'
    
  Escenario: Profesor que no está en el archivoGeneral de la escuela y profesor HoraCatedra que no da clases
    Dado que en la fila 19 columna O he escrito 'Sheldon Cooper'
    Cuando se generan los archivos de salida y reporte de errores
    Entonces el archivo de logs debe incluir 'El nombre del profesor 'Sheldon Cooper' no se encuentra en el archivo de datosGenerales de la escuela'
    Y el archivo de logs debe incluir 'El profesor 'Leonard' se encuentra en el archivo de datosGenerales de la escuela, pero no parece que vaya a tener ninguna asignatura a cargo'
 
  Escenario: Todo está bien especificado y las salidas son correctas
    Cuando se generan los archivos de salida y reporte de errores
    Entonces los archivos de salida deben ser correctos

  Escenario: Todo está bien especificado y las salidas son correctas a pesar de que hay pequeñas discrepancias en los nombres de los profesores (tildes, etc.)
    Dado que en la fila 4 columna L he escrito 'Pául McCartnéy'
    Y que en la fila 6 columna O he escrito 'George'
    Y que en la fila 7 columna O he escrito 'Richard Feynman'
    Y que en la fila 9 columna I he escrito 'NIELS BOHR'
    Y que en la fila 17 columna L he escrito 'Harrison'
    Cuando se generan los archivos de salida y reporte de errores
    Entonces los archivos de salida deben ser correctos
#@wip


      
    

